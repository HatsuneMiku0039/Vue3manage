import{a as k,O as A,r as V,o as S,g as U,a1 as v,z as e,Y as t,a2 as C,$ as L,a4 as x,a0 as E,aR as R,aS as O,aT as q,a3 as $,ab as P,j as D,E as Y,a5 as G,a6 as J}from"./index-f94ac9b9.js";import{E as N,a as T}from"./el-checkbox-7fc72773.js";import{E as K,a as Q}from"./el-col-f0b553a8.js";import{E as W}from"./el-date-picker-d9b2d457.js";import"./el-scrollbar-1ea775f3.js";/* empty css                  */import{E as X,a as Z,b as ee,c as te,d as oe,e as le}from"./el-dialog-3422d263.js";/* empty css                */import{f as I}from"./format-754e67a7.js";const ae={class:"goods-search"},ne={class:"form"},de={class:"btn"},se=k({__name:"goods-search",emits:["handlerSearchClick","handlerResetClick"],setup(s,{emit:m}){const u=A({name:"",address:"",status:"",createAt:""}),c=V();function g(){m("handlerSearchClick",u)}function l(){var f;(f=c.value)==null||f.resetFields(),m("handlerResetClick")}return(f,n)=>{const h=L,a=N,r=K,i=X,w=Z,b=W,p=Q,o=x,y=T;return S(),U("div",ae,[v("div",ne,[e(y,{ref_key:"formRef",ref:c,model:u},{default:t(()=>[e(p,{gutter:20},{default:t(()=>[e(r,{span:8},{default:t(()=>[e(a,{label:"商品名称",prop:"name"},{default:t(()=>[e(h,{modelValue:u.name,"onUpdate:modelValue":n[0]||(n[0]=d=>u.name=d),type:"text",placeholder:"请选择商品名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:8},{default:t(()=>[e(a,{label:"商品地址",prop:"address"},{default:t(()=>[e(h,{modelValue:u.address,"onUpdate:modelValue":n[1]||(n[1]=d=>u.address=d),type:"text",placeholder:"请选择商品地址"},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:8},{default:t(()=>[e(a,{label:"状态",prop:"status"},{default:t(()=>[e(w,{modelValue:u.status,"onUpdate:modelValue":n[2]||(n[2]=d=>u.status=d),placeholder:"请选择状态"},{default:t(()=>[e(i,{label:"已上架",value:"1"}),e(i,{label:"已下架",value:"0"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:8},{default:t(()=>[e(a,{label:"创建时间",prop:"createAt"},{default:t(()=>[e(b,{type:"daterange","range-separator":"To","start-placeholder":"开始时间","end-placeholder":"结束时间",modelValue:u.createAt,"onUpdate:modelValue":n[3]||(n[3]=d=>u.createAt=d)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(r,null,{default:t(()=>[v("div",de,[e(o,{size:"large",type:"default",onClick:l},{default:t(()=>[C("重置")]),_:1}),e(o,{size:"large",type:"primary",onClick:g},{default:t(()=>[C("搜索")]),_:1})])]),_:1})]),_:1})]),_:1},8,["model"])])])}}});const re=E(se,[["__scopeId","data-v-25bf8fa1"]]);function ue(s){return R.post({url:"/goods/list",data:s})}function ce(s){return R.delete({url:`/goods/${s}`})}function ie(s){return R.post({url:"/goods",data:s})}const pe=O("product",{state:()=>({productData:[],totalCount:0}),actions:{async fetchProductList(s){const m=await ue(s);this.productData=m.data.list??[],this.totalCount=m.data.totalCount},async fetchDeleteProduct(s){await ce(s)},async fetchNewProductData(s){const m=await ie(s);this.fetchProductList({offset:0,size:10}),console.log(m)}}}),M=pe,_e=s=>(G("data-v-04f828f6"),s=s(),J(),s),me={class:"goods-content"},fe={class:"title"},ge=_e(()=>v("h3",{class:"text"},"商品列表",-1)),ve={class:"newData"},he={class:"over-text"},Ve={class:"over-text"},Ce=["src"],be={class:"page"},we=k({__name:"goods-content",emits:["newDataProduct"],setup(s,{expose:m,emit:u}){const c=M(),g=V(1),l=V(10),f=V();c.$onAction(({name:p,after:o})=>{o(()=>{})}),n();function n(p){f.value=p;const o={offset:(g.value-1)*l.value,size:l.value};c.fetchProductList({...o,...p})}function h(p){l.value=p,n(f.value)}function a(p){g.value=p,n(f.value)}const{productData:r,totalCount:i}=q(c);function w(p){c.fetchDeleteProduct(p)}function b(){u("newDataProduct")}return m({postProductList:n}),(p,o)=>{const y=x,d=ee,B=$("Edit"),z=Y,F=$("Delete"),j=te,H=oe;return S(),U("div",me,[v("div",fe,[ge,v("div",ve,[e(y,{type:"primary",onClick:b},{default:t(()=>[C("新增商品")]),_:1})])]),e(j,{data:D(r),style:{width:"100%"},border:""},{default:t(()=>[e(d,{align:"center",type:"index",prop:"index",label:"序号",width:"80"}),e(d,{align:"center",prop:"name",label:"商品名称",width:"100"},{default:t(_=>[v("div",he,P(_.row.name),1)]),_:1}),e(d,{align:"center",prop:"oldPrice",label:"原价格",width:"80"}),e(d,{align:"center",prop:"newPrice",label:"新价格",width:"80"}),e(d,{align:"center",prop:"desc",label:"商品描述",width:"100"},{default:t(_=>[v("div",Ve,P(_.row.desc),1)]),_:1}),e(d,{align:"center",prop:"status",label:"状态",width:"60"}),e(d,{align:"center",prop:"imgUrl",label:"图片",width:"100"},{default:t(_=>[v("img",{class:"imgUrl",src:_.row.imgUrl},null,8,Ce)]),_:1}),e(d,{align:"center",prop:"favorCount",label:"收藏",width:"60"}),e(d,{align:"center",prop:"address",label:"地址",width:"60"}),e(d,{align:"center",prop:"createAt",label:"创建时间",width:"170"},{default:t(_=>[C(P(D(I)(_.row.createAt)),1)]),_:1}),e(d,{align:"center",prop:"updateAt",label:"更新时间",width:"170"},{default:t(_=>[C(P(D(I)(_.row.updateAt)),1)]),_:1}),e(d,{align:"center",prop:"handler",label:"操作"},{default:t(_=>[e(y,{size:"small",type:"primary"},{default:t(()=>[e(z,null,{default:t(()=>[e(B)]),_:1})]),_:1}),e(y,{type:"danger",size:"small",onClick:xe=>w(_.row.id)},{default:t(()=>[e(z,null,{default:t(()=>[e(F)]),_:1})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),v("div",be,[e(H,{"current-page":g.value,"onUpdate:currentPage":o[0]||(o[0]=_=>g.value=_),"page-size":l.value,"onUpdate:pageSize":o[1]||(o[1]=_=>l.value=_),"page-sizes":[5,10,15],layout:"total, sizes, prev, pager, next, jumper",total:D(i),onSizeChange:h,onCurrentChange:a},null,8,["current-page","page-size","total"])])])}}});const ye=E(we,[["__scopeId","data-v-04f828f6"]]),Pe={class:"goods-modal"},De={class:"dialog-footer"},ke=k({__name:"goods-modal",setup(s,{expose:m}){const u=M(),c=V(!1),g=V(),l=A({name:"",oldPrice:"",newPrice:"",desc:"",status:"",imgUrl:"",inventoryCount:"",saleCount:"",favorCount:"",address:""});function f(){c.value=!0}function n(){c.value=!1,u.fetchNewProductData(l)}return m({setDialogVisible:f}),(h,a)=>{const r=L,i=N,w=T,b=x,p=le;return S(),U("div",Pe,[e(p,{modelValue:c.value,"onUpdate:modelValue":a[11]||(a[11]=o=>c.value=o),title:"添加商品",width:"30%",center:""},{footer:t(()=>[v("span",De,[e(b,{onClick:a[10]||(a[10]=o=>c.value=!1)},{default:t(()=>[C("取消")]),_:1}),e(b,{type:"primary",onClick:n},{default:t(()=>[C(" 确认 ")]),_:1})])]),default:t(()=>[e(w,{model:g.value,"label-width":"70px"},{default:t(()=>[e(i,{label:"商品名称",prop:"name"},{default:t(()=>[e(r,{modelValue:l.name,"onUpdate:modelValue":a[0]||(a[0]=o=>l.name=o),placeholder:"请输入商品名称"},null,8,["modelValue"])]),_:1}),e(i,{label:"原价格"},{default:t(()=>[e(r,{modelValue:l.oldPrice,"onUpdate:modelValue":a[1]||(a[1]=o=>l.oldPrice=o),placeholder:"请输入原价格"},null,8,["modelValue"])]),_:1}),e(i,{label:"新价格"},{default:t(()=>[e(r,{modelValue:l.newPrice,"onUpdate:modelValue":a[2]||(a[2]=o=>l.newPrice=o),placeholder:"请输入新价格"},null,8,["modelValue"])]),_:1}),e(i,{label:"描述信息"},{default:t(()=>[e(r,{modelValue:l.desc,"onUpdate:modelValue":a[3]||(a[3]=o=>l.desc=o),placeholder:"请输入描述信息"},null,8,["modelValue"])]),_:1}),e(i,{label:"状态"},{default:t(()=>[e(r,{modelValue:l.status,"onUpdate:modelValue":a[4]||(a[4]=o=>l.status=o),placeholder:"请选择状态"},null,8,["modelValue"])]),_:1}),e(i,{label:"图片"},{default:t(()=>[e(r,{modelValue:l.imgUrl,"onUpdate:modelValue":a[5]||(a[5]=o=>l.imgUrl=o),placeholder:"请输入描述信息"},null,8,["modelValue"])]),_:1}),e(i,{label:"地址"},{default:t(()=>[e(r,{modelValue:l.address,"onUpdate:modelValue":a[6]||(a[6]=o=>l.address=o),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1}),e(i,{label:"收藏数量"},{default:t(()=>[e(r,{modelValue:l.favorCount,"onUpdate:modelValue":a[7]||(a[7]=o=>l.favorCount=o),placeholder:"请输入收藏数量"},null,8,["modelValue"])]),_:1}),e(i,{label:"销售数量"},{default:t(()=>[e(r,{modelValue:l.saleCount,"onUpdate:modelValue":a[8]||(a[8]=o=>l.saleCount=o),placeholder:"请输入销售的数量"},null,8,["modelValue"])]),_:1}),e(i,{label:"库存数量"},{default:t(()=>[e(r,{modelValue:l.inventoryCount,"onUpdate:modelValue":a[9]||(a[9]=o=>l.inventoryCount=o),placeholder:"请输入库存数量"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const Se=E(ke,[["__scopeId","data-v-3a97ecfd"]]),Ue={class:"goods-info"},Ee=k({__name:"goods-info",setup(s){const m=V(),u=V(),c=V();function g(n){var h;(h=c.value)==null||h.postProductList(n)}function l(){var n;(n=c.value)==null||n.postProductList()}function f(){var n;(n=u.value)==null||n.setDialogVisible()}return(n,h)=>(S(),U("div",Ue,[e(re,{ref_key:"goodsSearchRef",ref:m,onHandlerSearchClick:g,onHandlerResetClick:l},null,512),e(ye,{ref_key:"goodsContentRef",ref:c,onNewDataProduct:f},null,512),e(Se,{ref_key:"goodsModalRef",ref:u},null,512)]))}});const Be=E(Ee,[["__scopeId","data-v-8e4e11fe"]]);export{Be as default};

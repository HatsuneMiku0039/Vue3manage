import{X as H,a as R,r as D,aT as J,o as t,g as C,a1 as z,ab as P,j as E,a9 as i,Y as a,a2 as M,S as N,z as f,av as U,aI as A,au as b,aa as K,a4 as j,E as Z,a0 as q,O as ee,ah as te,I as oe,$ as ne}from"./index-f94ac9b9.js";import{b as ae,c as le,d as se,E as re,a as ce,e as ie}from"./el-dialog-3422d263.js";import"./el-scrollbar-1ea775f3.js";/* empty css                  */import{E as ue,a as de}from"./el-checkbox-7fc72773.js";/* empty css                */import{E as O}from"./el-message-30201c1c.js";import{u as Q,E as pe}from"./system-f5d1f5bc.js";import{f as fe}from"./format-754e67a7.js";function T(l){console.log(l);const V=H(),{menuAuthor:u}=V;return!!u.find(o=>o.includes(l))}const ge={class:"content"},me={class:"header"},_e={class:"table"},Ce={class:"page"},ye=R({__name:"page-content",props:{contentConfigCom:null,contentConfig:null},emits:["handlerNewClick","handlerEditClick"],setup(l,{expose:V,emit:u}){const d=l,o=Q(),y=T(`${d.contentConfig.pageName}:create`),w=T(`${d.contentConfig.pageName}:delete`),S=T(`${d.contentConfig.pageName}:update`),m=T(`${d.contentConfig.pageName}:query`),v=D(1),I=D(10);o.$onAction(({name:r,after:e})=>{e(()=>{(r==="deleteDataInfo"||r==="pageNewDataInfo"||r==="pageEditUserInfo")&&(v.value=1)})}),h();const{pageList:s,pageTotalCount:p}=J(o);function g(){h()}function $(){h()}function h(r={}){if(!m)return;const e=I.value,c=(v.value-1)*e,k={size:e,offset:c};o.pageListInfo(d.contentConfig.pageName,{...k,...r})}function B(r){pe.confirm("确认删除吗","Warning",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then(()=>{o.deleteDataInfo(d.contentConfig.pageName,r.id),O({type:"success",message:"删除成功"})}).catch(()=>{O({type:"success",message:"取消成功"})})}function L(){u("handlerNewClick")}function x(r){u("handlerEditClick",r)}return V({postUserList:h}),(r,e)=>{var F;const c=j,k=ae,W=Z,X=le,Y=se;return t(),C("div",ge,[z("div",me,[z("h3",null,P((F=l.contentConfig.header)==null?void 0:F.title),1),E(y)?(t(),i(c,{key:0,type:"primary",onClick:L},{default:a(()=>{var n;return[M(P((n=l.contentConfig.header)==null?void 0:n.btnTitle),1)]}),_:1})):N("",!0)]),z("div",_e,[f(X,b({data:E(s),border:"",style:{width:"100%"}},l.contentConfig.childrenTree),{default:a(()=>[(t(!0),C(U,null,A(l.contentConfig.contentData,n=>(t(),C(U,{key:n.prop},[n.type==="timer"?(t(),i(k,b({key:0,align:"center"},n),{default:a(_=>[M(P(E(fe)(_.row[n.prop])),1)]),_:2},1040)):n.type==="handler"?(t(),i(k,b({key:1,align:"center"},n),{default:a(_=>[E(S)?(t(),i(c,{key:0,type:"primary",icon:"Edit",size:"small",onClick:G=>x(_.row)},null,8,["onClick"])):N("",!0),E(w)?(t(),i(c,{key:1,type:"danger",icon:"Delete",size:"small",onClick:G=>B(_.row)},null,8,["onClick"])):N("",!0)]),_:2},1040)):n.type==="icon"?(t(),i(k,b({key:2},n,{align:"center"}),{default:a(_=>[f(W,{size:"large"},{default:a(()=>[(t(),i(K(_.row.icon?_.row.icon.split("el-icon-")[1]:!1)))]),_:2},1024)]),_:2},1040)):(t(),i(k,b({key:3,align:"center"},n),null,16))],64))),128))]),_:1},16,["data"])]),z("div",Ce,[f(Y,{"current-page":v.value,"onUpdate:currentPage":e[0]||(e[0]=n=>v.value=n),background:"","page-size":I.value,"onUpdate:pageSize":e[1]||(e[1]=n=>I.value=n),"page-sizes":[5,10,15],layout:"total, sizes, prev, pager, next, jumper",total:E(p),onSizeChange:g,onCurrentChange:$},null,8,["current-page","page-size","total"])])])}}});const Se=q(ye,[["__scopeId","data-v-9843681c"]]),ve={class:"modal"},he={class:"dialog-footer"},ke=R({__name:"page-modal",props:{modalConfig:null,introMenu:null},setup(l,{expose:V}){const u=l,d={};for(const s of u.modalConfig.formItems)d[s.prop]="";const o=ee(d),y=D(!0),w=D(),S=Q(),m=D(!1);function v(s=!0,p){if(m.value=!0,!s&&p){y.value=!1;for(const g in o)o[g]=p[g];w.value=p}else{y.value=!0;for(const g in o)o[g]="";w.value=null}}function I(){m.value=!1;let s=o;u.introMenu&&(s={...s,...u.introMenu}),y.value?S.pageNewDataInfo(u.modalConfig.pageName,s):S.pageEditUserInfo(u.modalConfig.pageName,w.value.id,s)}return V({setDialogModal:v}),(s,p)=>{const g=ne,$=ue,h=re,B=ce,L=de,x=j,r=ie;return t(),C("div",ve,[f(r,{modelValue:m.value,"onUpdate:modelValue":p[1]||(p[1]=e=>m.value=e),title:y.value?l.modalConfig.header.newTitle:l.modalConfig.header.editTitle,width:"30%"},{footer:a(()=>[z("span",he,[f(x,{onClick:p[0]||(p[0]=e=>m.value=!1)},{default:a(()=>[M("取消")]),_:1}),f(x,{type:"primary",onClick:I},{default:a(()=>[M(" 确认 ")]),_:1})])]),default:a(()=>[f(L,{model:o,"label-width":"80px"},{default:a(()=>[(t(!0),C(U,null,A(l.modalConfig.formItems,e=>(t(),C(U,{key:e.prop},[e.type==="input"?(t(),i($,{key:0,label:e.label},{default:a(()=>[f(g,{modelValue:o[e.prop],"onUpdate:modelValue":c=>o[e.prop]=c,placeholder:e.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label"])):N("",!0),e.type==="select"?(t(),i($,{key:1,label:e.label},{default:a(()=>[f(B,{placeholder:"请选择上级部门",modelValue:o[e.prop],"onUpdate:modelValue":c=>o[e.prop]=c},{default:a(()=>[(t(!0),C(U,null,A(e.options,c=>(t(),i(h,te(b({key:c.value},c)),null,16))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])):N("",!0),e.type==="custom"?oe(s.$slots,e.slotName,{key:2},void 0,!0):N("",!0)],64))),128))]),_:3},8,["model"])]),_:3},8,["modelValue","title"])])}}});const $e=q(ke,[["__scopeId","data-v-64d6945e"]]);export{$e as a,Se as p,T as u};

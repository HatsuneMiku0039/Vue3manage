import{aY as Z,b as X,_ as j,a as P,c as ee,u as F,t as te,r as u,v as w,ac as ae,af as A,ae as D,o as k,a9 as W,Y as G,Q as le,a1 as Y,h as H,j as d,k as $,R as se,aB as oe,bq as re,g as Q,z as K,av as ne,d as ie,L as E,aq as U,w as q,e as ce,n as I,G as ue,O as ve,x as fe,y as me,I as de,aa as he,S as pe,aH as be,T as ye}from"./index-f94ac9b9.js";const Le=(...v)=>n=>{v.forEach(o=>{Z(o)?o(n):o.value=n})},g=4,ge={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},we=({move:v,size:n,bar:o})=>({[o.size]:n,transform:`translate${o.axis}(${v}%)`}),J=Symbol("scrollbarContextKey"),Se=X({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),ze="Thumb",_e=P({__name:"thumb",props:Se,setup(v){const n=v,o=ee(J),l=F("scrollbar");o||te(ze,"can not inject scrollbar context");const c=u(),f=u(),r=u({}),m=u(!1);let a=!1,p=!1,b=re?document.onselectstart:null;const t=w(()=>ge[n.vertical?"vertical":"horizontal"]),S=w(()=>we({size:n.size,move:n.move,bar:t.value})),z=w(()=>c.value[t.value.offset]**2/o.wrapElement[t.value.scrollSize]/n.ratio/f.value[t.value.offset]),T=s=>{var e;if(s.stopPropagation(),s.ctrlKey||[1,2].includes(s.button))return;(e=window.getSelection())==null||e.removeAllRanges(),L(s);const i=s.currentTarget;i&&(r.value[t.value.axis]=i[t.value.offset]-(s[t.value.client]-i.getBoundingClientRect()[t.value.direction]))},x=s=>{if(!f.value||!c.value||!o.wrapElement)return;const e=Math.abs(s.target.getBoundingClientRect()[t.value.direction]-s[t.value.client]),i=f.value[t.value.offset]/2,h=(e-i)*100*z.value/c.value[t.value.offset];o.wrapElement[t.value.scroll]=h*o.wrapElement[t.value.scrollSize]/100},L=s=>{s.stopImmediatePropagation(),a=!0,document.addEventListener("mousemove",R),document.addEventListener("mouseup",y),b=document.onselectstart,document.onselectstart=()=>!1},R=s=>{if(!c.value||!f.value||a===!1)return;const e=r.value[t.value.axis];if(!e)return;const i=(c.value.getBoundingClientRect()[t.value.direction]-s[t.value.client])*-1,h=f.value[t.value.offset]-e,_=(i-h)*100*z.value/c.value[t.value.offset];o.wrapElement[t.value.scroll]=_*o.wrapElement[t.value.scrollSize]/100},y=()=>{a=!1,r.value[t.value.axis]=0,document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",y),C(),p&&(m.value=!1)},M=()=>{p=!1,m.value=!!n.size},O=()=>{p=!0,m.value=a};ae(()=>{C(),document.removeEventListener("mouseup",y)});const C=()=>{document.onselectstart!==b&&(document.onselectstart=b)};return A(D(o,"scrollbarElement"),"mousemove",M),A(D(o,"scrollbarElement"),"mouseleave",O),(s,e)=>(k(),W(oe,{name:d(l).b("fade"),persisted:""},{default:G(()=>[le(Y("div",{ref_key:"instance",ref:c,class:H([d(l).e("bar"),d(l).is(d(t).key)]),onMousedown:x},[Y("div",{ref_key:"thumb",ref:f,class:H(d(l).e("thumb")),style:$(d(S)),onMousedown:T},null,38)],34),[[se,s.always||m.value]])]),_:1},8,["name"]))}});var V=j(_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Ee=X({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),ke=P({__name:"bar",props:Ee,setup(v,{expose:n}){const o=v,l=u(0),c=u(0);return n({handleScroll:r=>{if(r){const m=r.offsetHeight-g,a=r.offsetWidth-g;c.value=r.scrollTop*100/m*o.ratioY,l.value=r.scrollLeft*100/a*o.ratioX}}}),(r,m)=>(k(),Q(ne,null,[K(V,{move:l.value,ratio:r.ratioX,size:r.width,always:r.always},null,8,["move","ratio","size","always"]),K(V,{move:c.value,ratio:r.ratioY,size:r.height,vertical:"",always:r.always},null,8,["move","ratio","size","always"])],64))}});var He=j(ke,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Te=X({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ie([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Re={scroll:({scrollTop:v,scrollLeft:n})=>[v,n].every(E)},Ce="ElScrollbar",Ne=P({name:Ce}),Be=P({...Ne,props:Te,emits:Re,setup(v,{expose:n,emit:o}){const l=v,c=F("scrollbar");let f,r;const m=u(),a=u(),p=u(),b=u("0"),t=u("0"),S=u(),z=u(1),T=u(1),x=w(()=>{const e={};return l.height&&(e.height=U(l.height)),l.maxHeight&&(e.maxHeight=U(l.maxHeight)),[l.wrapStyle,e]}),L=w(()=>[l.wrapClass,c.e("wrap"),{[c.em("wrap","hidden-default")]:!l.native}]),R=w(()=>[c.e("view"),l.viewClass]),y=()=>{var e;a.value&&((e=S.value)==null||e.handleScroll(a.value),o("scroll",{scrollTop:a.value.scrollTop,scrollLeft:a.value.scrollLeft}))};function M(e,i){be(e)?a.value.scrollTo(e):E(e)&&E(i)&&a.value.scrollTo(e,i)}const O=e=>{E(e)&&(a.value.scrollTop=e)},C=e=>{E(e)&&(a.value.scrollLeft=e)},s=()=>{if(!a.value)return;const e=a.value.offsetHeight-g,i=a.value.offsetWidth-g,h=e**2/a.value.scrollHeight,_=i**2/a.value.scrollWidth,N=Math.max(h,l.minSize),B=Math.max(_,l.minSize);z.value=h/(e-h)/(N/(e-N)),T.value=_/(i-_)/(B/(i-B)),t.value=N+g<e?`${N}px`:"",b.value=B+g<i?`${B}px`:""};return q(()=>l.noresize,e=>{e?(f==null||f(),r==null||r()):({stop:f}=ce(p,s),r=A("resize",s))},{immediate:!0}),q(()=>[l.maxHeight,l.height],()=>{l.native||I(()=>{var e;s(),a.value&&((e=S.value)==null||e.handleScroll(a.value))})}),ue(J,ve({scrollbarElement:m,wrapElement:a})),fe(()=>{l.native||I(()=>{s()})}),me(()=>s()),n({wrapRef:a,update:s,scrollTo:M,setScrollTop:O,setScrollLeft:C,handleScroll:y}),(e,i)=>(k(),Q("div",{ref_key:"scrollbarRef",ref:m,class:H(d(c).b())},[Y("div",{ref_key:"wrapRef",ref:a,class:H(d(L)),style:$(d(x)),onScroll:y},[(k(),W(he(e.tag),{ref_key:"resizeRef",ref:p,class:H(d(R)),style:$(e.viewStyle)},{default:G(()=>[de(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?pe("v-if",!0):(k(),W(He,{key:0,ref_key:"barRef",ref:S,height:t.value,width:b.value,always:e.always,"ratio-x":T.value,"ratio-y":z.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Pe=j(Be,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Me=ye(Pe);export{Me as E,Le as c};
